const Lib={init(){const t=(t,n,s=7,l=1,e,d=0)=>{let o={dep:s,cm:l};return e&&Object.assign(o,e),{n:t,def:d,spr:n.split(","),add:o}};this.obj=[t("出生点","pst",7,0),t("传送门","wp",8,1,{wr:128,ws:0,wx:0,wy:0},0),t("存档","sp",6,1,0,1),t("砖块","blk",5,2,{til:15}),t("小砖","blkm",5,2),t("冰砖","blk,ice",5,2,{frc:.1}),t("射击砖","bbl",5,2,{trg:[[1,1,[[2.01,0,1]],[[5.01,"brk",0],[3.01,1]]]]}),t("刺","spk",4,4),t("樱桃","chr",7,4),t("致命方块","kbl",6,4),t("刺齿轮","sg",4,4,{num:4,mov:[[6,[0,1]]]}),t("激光","lsr",7,4,{len:32,lso:1,lst:0},3),t("岩浆","lava",9,4),t("板子","pf",7,3),t("藤蔓","wj",6),t("水","wt2",9,5),t("水 (二段)","wt1",9,5),t("水 (无跳跃)","wt4",9,5),t("毒水","twt",9,5,{dnt:250}),t("箱子","crt",7,2,{mov:[[4,.4,270]]},4),t("传送带","cvy",7,1,{spd:1}),t("梯子","ld",6),t("绳子","rp",7,1,{len:64}),t("弹簧","spr",7,1,{trg:[[1,1,[[2.01,0,0]],[[7.04,[0,10],[2,90]],[3.02,1],[5.01,"spr",0]]]]}),t("蹦床","tp",7,1,{trg:[[1,0,[[2.01,0,0]],[[7.04,[0,10],[2,90]]]]]}),t("+1跳","jr",7,1,{trg:[[1,1,[[2.01,0,0]],[[7.01,0],[5.01,"ej",0],[3.01,0]]]]}),t("三段跳","tj",7,1,{trg:[[1,0,[[1.06,0,"jump",5,3],[2.01,0,0]],[[7.02,3],[5.01,"gj",0],[5.02,25,.05,.05,[0,0],[0,0],[0,0],[0,0]]]]]}),t("二段跳","dj",7,1,{trg:[[1,0,[[1.06,0,"jump",5,2],[2.01,0,0]],[[7.02,2],[5.01,"lj",0],[5.02,25,.05,.05,[0,0],[0,0],[0,0],[0,0]]]]]}),t("一段跳","sj",7,1,{trg:[[1,0,[[1.06,0,"jump",5,1],[2.01,0,0]],[[7.02,1],[5.01,"lj",0],[5.02,25,.05,.05,[0,0],[0,0],[0,0],[0,0]]]]]}),t("无限跳","ij",7,1,{trg:[[1,0,[[1.06,0,"jump",5,-1],[2.01,0,0]],[[7.02,-1],[5.01,"gj",0],[5.02,25,.05,.05,[0,0],[0,0],[0,0],[0,0]]]]]}),t("低重力","lg",3,1),t("高重力","hg",3,1),t("高速","fs",3,1),t("低速","ss",3,1),t("重力朝上","gu",6,1,{trg:[[1,0,[[2.01,0,0]],[[7.03,90]]]]}),t("重力朝下","gd",6,1,{trg:[[1,0,[[2.01,0,0]],[[7.03,270]]]]}),t("触发器","trg",7,1,{hd:1,trg:[[1,1,[[2.01,0,0]],[[3.03,0,0]]]]}),t("射击按钮","btn",7,1,{trg:[[1,1,[[2.01,0,1]],[[3.03,0,0],[3.02,1]]]]}),t("开关","sw",7,1,{trg:[[1,1,[[2.01,0,0]],[[3.03,0,0],[3.02,1]]]]}),t("告示牌","bd",6,1,{txt:""}),t("箭头","arr",6,0),t("贴墙提示","xa",7,1,{trg:[[2,0,[[2.01,0,0]],[[3.02,1]]],[2,0,[[2.02,0,0]],[[3.02,0]]]]}),t("文本","txt",10,0,{w:128,h:64,txt:"文本区域 Text Area",ftf:0,fts:16,ftt:0,fta:0,ftc:"#000",fsd:0,fsc:"#000",fst:0,fkc:"#000"}),t("背景贴图","tile",2,0),t("树","tree",1,0),t("云","cld",0,0),t("月亮","moon",0,0),t("星星","star",0,0),t("植物","grs",3,0),t("水 (额外二段)","wt3",9,5),t("阻挡砖","sbl",6,1,{al:0,trg:[[1,0,[[2.01,0,1]],[[1.05,[0,1],1],[1.05,[0,0],20]]]]})],this.obj.for((t,n)=>t.ind=n)},spr:{ply:{n:16,w:32,h:32,b:[12,11,11,21]},blt:{n:2,x:-1,y:-1,s:1,W:16,H:16},sp:{n:2,w:32,h:32},wp:{w:32,h:32,d:1,p:1},spk:{w:32,h:32,d:1,p:1},chr:{n:2,w:21,h:24,x:10,y:12,s:15,p:1},lsr:{n:2,x:-1,W:32,H:32},jr:{x:-1,y:-1,p:1,W:32,H:32},spr:{n:2,w:32,h:32,p:1},tp:{W:64,H:32},bd:{w:32,h:32},arr:{w:32,h:32},xa:{n:2,x:1,W:32,h:32},blk:{t:1},tile:{t:1},blkm:{w:16,h:16},pf:{w:32,H:32},bbl:{w:32,h:32},kbl:{w:32,h:32},ice:{w:32,H:32},wt1:{w:32,h:32,b:[0,0,32,32]},wt2:{w:32,h:32,b:[0,0,32,32]},wt3:{w:32,h:32,b:[0,0,32,32]},wt4:{w:32,h:32,b:[0,0,32,32]},twt:{w:32,h:32,b:[0,0,32,32]},lava:{w:32,h:32,d:1},wj:{w:32,h:32},sbl:{w:32,h:32},crt:{w:32,h:32},cvy:{w:32,H:32},ld:{x:-1,W:32,h:32},rp:{n:2,x:-1,W:32,h:32},trg:{w:32,h:32,b:[0,0,32,32]},btn:{n:2,w:32,h:32},dbt:{n:2,w:32,h:32},sw:{n:2,x:-1,y:-1,W:32,H:32},swr:{n:2,w:32,h:32},mb:{x:-1,y:-1,W:64,H:64},tj:{w:32,h:32},dj:{w:32,h:32},sj:{w:32,h:32},ij:{w:32,h:32},lg:{w:32,h:32},hg:{w:32,h:32},fs:{w:32,h:32},ss:{w:32,h:32},gu:{w:32,h:32},gd:{w:32,h:32},tree:{p:1,W:320,H:320},cld:{W:320,H:320},moon:{p:1,x:-1,y:-1,W:320,H:320},star:{p:1,x:-1,y:-1,W:320,H:320},grs:{p:1,W:320,H:320},sg:{x:12,y:12}},thm:["1oZIHhXVJA","ah1R8UkWDi","PCptJrW5uw","1FiDO42HsD","zefE5PJTIU","PvdQ2ZtRjb","bUPQwPD0Fp","Aa4jvzXfAZ","YMncsAlRE0","Js7E0Pa7Hq","KVXF8n8DQU","mEDHuOyHS7","kjkgob1BRn","NnEXoRM7le","zRMc04OAWF","ZMIc6pETa4","BGeaFgPFjC","YqQvAzwGdH","eo2WBlpNjk","Irh1AqrDCr","Aw0AppT05P","7CWHnSZhXt","Jdoh21nJfi","bsnnzHrV9C","cThHx00Alo","Hm0dIVcC9B","wrEq1BGHWF","evtyCHjp9F","SPEi8uXbu0","pmcBEpODmD","ZaDAFhKBKU","MAsszUHnXq","WwXIzIbaOA","dFOYH6DDdo","AjsYWzE7n6","8SQdxlMxsZ","ZpwzvN0oWx","frV3im8ymP","GKqF86I8cP","aZbP6yFEHx","HEky35xbOK","JBes8Fy5aM","hGFHvw4yqy","1effklJCue","D7SUi5U9If","7EDa7DtuAM","S7vWDjyKU9","dYkdsJrsdg","2QVCdDpnMW","N0HoroQ8R5","KzuAaXMDvU","DfmYD5W0ae","ITbQR784IN",0,0,0,0,0,0,0,0,0],dynAct:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,1.02,1.03,1.04,1.05,1.06,1.07,1.08,2.02,2.03,2.04,2.05,3.01,3.02],colAct:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,1.01,1.02,1.03,1.06,1.07,1.08,2.02,2.03,2.04,2.05],dmov:[(t,[,n,s,l,e])=>{t.toX=n[0]?n[1]:t.x+n[1],t.toY=s[0]?s[1]:t.y+s[1];let d=0===l[0]?l[1]:Math.srandom(l[1],l[2]),o=t.toX-t.x,a=t.toY-t.y,h=(o*o+a*a)**.5;return 0===e?(t.hsp=t.toHspd=o/h*d,t.vsp=t.toVspd=a/h*d):(t.toSmth=h/d,t.hsp=o/h*d,t.vsp=a/h*d),t.MOV[0]=Lib.mov[9+e],t.MOV[1]=null,!0},(t,[,n,s,l,e])=>{let d,o,a=0===l[0]?l[1]:Math.srandom(l[1],l[2]);if(s[0]<3){let l=(0===s[0]?s[1]:1===s[0]?Math.srandom(s[1],s[2]):t.ang+s[1])*Math.DR;d=n*Math.cos(l),o=-n*Math.sin(l)}else{let l=$R.plyX-t.x,e=$R.plyY-t.y,a=(l*l+e*e)**.5;d=n*l/a,o=n*e/a,3===s[0]&&(d=-d,o=-o)}return 0===e?(t.hsp=t.toHspd=d/n*a,t.vsp=t.toVspd=o/n*a):(t.toSmth=n/a,t.hsp=d/n*a,t.vsp=o/n*a),t.toX=t.x+d,t.toY=t.y+o,t.MOV[0]=Lib.mov[9+e],t.MOV[1]=null,!0},(t,[,n,s])=>(t.hspd=0===n[0]?n[1]:Math.srandom(n[1],n[2]),t.vspd=0===s[0]?s[1]:Math.srandom(s[1],s[2]),t.MOV[0]=Lib.mov[0],!0),(t,[,n,s])=>{let l=0===n[0]?n[1]:Math.srandom(n[1],n[2]);if(s[0]<3){let n=(0===s[0]?s[1]:1===s[0]?Math.srandom(s[1],s[2]):t.ang+s[1])*Math.DR;t.hspd=l*Math.cos(n),t.vspd=-l*Math.sin(n)}else{let n=$R.plyX-t.x,e=$R.plyY-t.y,d=(n*n+e*e)**.5;t.hspd=l*n/d,t.vspd=l*e/d,3===s[0]&&(t.hspd=-t.hspd,t.vspd=-t.vspd)}return t.MOV[0]=Lib.mov[0],!0},(t,[,n,s])=>{let l=s*Math.DR;return t.hacc=n*Math.cos(l),t.vacc=-n*Math.sin(l),t.hacc<1e-10&&(t.hacc=0),t.vacc<1e-10&&(t.vacc=0),void 0===t.hspd&&(t.hspd=t.vspd=0),t.MOV[0]=Lib.mov[0],t.MOV[1]=Lib.mov[1],!0},(t,[,n])=>(t.angAdd=n[1],t.MOV[2]=Lib.mov[2+n[0]],n[0]),(t,[,n])=>(t.angSpd=0===n[0]?n[1]:Math.srandom(n[1],n[2]),t.MOV[2]=Lib.mov[4],!0),(t,[,n,s,l])=>(t.angSin=0,t.angSinO=n,t.angSinA=s,t.angSinSpd=Math.PI2/l,t.MOV[2]=Lib.mov[5],!0),(t,[,n,s,l])=>(t.hSin=l*Math.DR,t.hSinA=n,t.hSinSpd=Math.PI2/s,void 0===t.addX&&(t.addX=n*Math.sin(t.hSin)),t.MOV[3]=Lib.mov[6],!0),(t,[,n,s,l])=>(t.vSin=l*Math.DR,t.vSinA=n,t.vSinSpd=Math.PI2/s,void 0===t.addY&&(t.addY=n*Math.sin(t.vSin)),t.MOV[4]=Lib.mov[7],!0),t=>{},(t,[,n])=>(t.gSpd=n,t.MOV[0]=Lib.mov[0],t.MOV[5]=Lib.mov[8],!0),(t,[,n,s,l,e])=>(t.syncX=n?s:void 0,t.syncY=l?e:void 0,t.MOV[0]=Lib.mov[14],t.MOV[1]=t.MOV[3]=t.MOV[4]=t.MOV[5]=null,!0),(t,[,n])=>(this.len||(t.$ago=n),!1)],mov:[t=>{t.$x=t.x+t.hspd,t.$y=t.y+t.vspd},t=>{t.hspd+=t.hacc,t.vspd+=t.vacc},t=>{t.$ang=t.dir+t.angAdd},t=>{let n=$R.plyX-t.x,s=-Math.atan($R.plyY-t.y/n)/Math.PI*180;t.$ang=(n<0?s+180:s)+t.angAdd},t=>{let n=t.ang+t.angSpd;n>360?n-=360:n<0&&(n+=360),t.$ang=n},t=>{t.$ang=t.angSinO+t.angSinA*Math.sin(t.angSin),t.angSin+=t.angSinSpd,t.angSin>Math.PI2&&(t.angSin-=Math.PI2)},t=>{t.x-=t.addX,t.addX=t.hSinA*Math.sin(t.hSin),t.hSin+=t.hSinSpd,t.$x=t.x+t.addX},t=>{t.y-=t.addY,t.addY=t.vSinA*Math.sin(t.vSin),t.vSin+=t.vSinSpd,t.$y=t.y+t.addY},t=>{let n=$R.plyX-t.x,s=$R.plyY-t.y,l=(n*n+s*s)**.5;t.hspd=n/l*t.gSpd,t.vspd=s/l*t.gSpd},t=>{t.$x=t.x+t.toHspd,t.$y=t.y+t.toVspd;let n=t.toHspd<0?t.toX-t.x>t.toHspd:t.toX-t.x<t.toHspd||!t.toHspd,s=t.toVspd<0?t.toY-t.y>t.toVspd:t.toY-t.y<t.toVspd||!t.toVspd;if(n&&s)return t.$x=t.toX,t.$y=t.toY,!0},t=>{if(t.$x=t.x+(t.toX-t.x)/t.toSmth,t.$y=t.y+(t.toY-t.y)/t.toSmth,Math.abs(t.x-t.toX)<1&&Math.abs(t.y-t.toY)<1)return t.$x=t.toX,t.$y=t.toY,!0},t=>{t.$scx=t.scx+t.toScxSpd,t.$scy=t.scy+t.toScySpd;let n=t.toScxSpd<0?t.toScx-t.scx>t.toScxSpd:t.toScx-t.scx<t.toScxSpd||!t.toScxSpd,s=t.toScySpd<0?t.toScy-t.scy>t.toScySpd:t.toScy-t.scy<t.toScySpd||!t.toScySpd;if(n&&s)return t.$scx=t.toScx,t.$scy=t.toScy,!0},t=>{if(t.$ang=t.ang+t.toAngSpd,t.toAngSpd<0?t.toAng-t.ang>t.toAngSpd:t.toAng-t.ang<t.toAngSpd)return t.$ang=t.toAng,!0},t=>{if(t.al+=t.toAlSpd,t.ctx.clr=!1,t.toAlSpd<0?t.toAl-t.al>t.toAlSpd:t.toAl-t.al<t.toAlSpd)return t.al=t.toAl,!0},t=>{void 0!==t.syncX&&(t.$x=$R.plyX+t.syncX),void 0!==t.syncY&&(t.$y=$R.plyY+t.syncY)},t=>{if(t.len+=t.toLenSpd,t.ctx.clr=!1,t.calc=!1,t.moved=!0,t.toLenSpd<0?t.toLen-t.len>t.toLenSpd:t.toLen-t.len<t.toLenSpd)return t.len=t.toLen,t.h=t.scy*t.len,!0;t.h=t.scy*t.len}],act:[[(t,[,n],s)=>s.time=n,(t,n,s)=>{n.ct<n[2]?(s.node=n[1],n.ct++):n.ct=0}],[(t,[,n])=>{n?(0===t.cm&&$R.Col[t.obj+5].add(t),t.cm!==n&&(t.cm>1&&t.clearCol(1),n>1&&$R.Col[n].add(t))):(t.clearCol(0),t.clearCol(1)),t.cm=n},(t,[,n,s,l])=>{let e=n[0]?t.scx+n[1]:n[1],d=s[0]?t.scy+s[1]:s[1];1===l?(t.$scx=e,t.$scy=d):(t.toScx=e,t.toScy=d,t.toScxSpd=(e-t.scx)/l,t.toScySpd=(d-t.scy)/l,t.MOV[6]=Lib.mov[11])},(t,[,n,s])=>{let l=n[0]?t.ang+n[1]:n[1];l!==t.ang&&(1===s?t.$ang=l:(t.toAng=l,t.toAngSpd=(l-t.ang)/s,t.MOV[2]=Lib.mov[12]))},(t,[,n])=>{t.hd=2===n?1^t.hd:n,t.ctx.clr=!1},(t,[,n,s])=>{let l=n[0]?t.al+n[1]:n[1];l>1?l=1:l<0&&(l=0),l!==t.al&&(1===s?(t.al=l,t.ctx.clr=!1):(t.toAl=l,t.toAlSpd=(l-t.al)/s,t.MOV[7]=Lib.mov[13]))},(t,[,n,s])=>{let l=n[0]?t.len+n[1]:n[1];l>800?l=800:l<32&&(l=32),l!==t.len&&(1===s?(t.len=l,t.h=t.scy*l,t.ctx.clr=!1,t.calc=!1,t.moved=!0):(t.toLen=l,t.toLenSpd=(l-t.len)/s,t.MOV[8]=Lib.mov[15]))},(t,[,n])=>{let s=2===n?!t.lso:!!n;t.lso!==s&&(t.lso=s,t.h=s?t.scy*t.len:0,t.ctx.clr=!1,t.calc=!1,t.moved=!0)},(t,[,n])=>{let s=2===n?!t.lst:!!n;t.lst!==s&&(t.lst=s,t.h=t.lso?t.scy*t.len:0,t.ctx.clr=!1,t.calc=!1,t.moved=!0)}],[t=>{t.MOV.length=0,t.hspd=0,t.vspd=0},(t,[,n])=>{switch(n[0]){case 0:t.spd=n[1];break;case 1:t.spd=Math.srandom(n[1],n[2]);break;case 2:t.spd=(t.spd||0)+n[1];break;case 3:t.spd=(t.spd||0)*n[1]}t.hsp=t.hspd,t.vsp=t.vspd,t.MOV[0]=Lib.mov[0]},(t,[,n])=>{switch(n[0]){case 0:t.hspd=n[1];break;case 1:t.hspd=Math.srandom(n[1],n[2]);break;case 2:t.hspd=(t.hspd||0)+n[1];break;case 3:t.hspd=(t.hspd||0)*n[1]}t.hsp=t.hspd,t.vspd||(t.vspd=0),t.MOV[0]=Lib.mov[0]},(t,[,n])=>{switch(n[0]){case 0:t.vspd=n[1];break;case 1:t.vspd=Math.srandom(n[1],n[2]);break;case 2:t.vspd=(t.vspd||0)+n[1];break;case 3:t.vspd=(t.vspd||0)*n[1]}t.vsp=t.vspd,t.hspd||(t.hspd=0),t.MOV[0]=Lib.mov[0]},(t,[,n])=>{switch(n[0]){case 0:t.dir=n[1];break;case 1:t.dir=Math.srandom(n[1],n[2]);break;case 2:case 3:let s=t.spd;if(!s)break;let l=$R.plyX-t.x,e=$R.plyY-t.y,d=(l*l+e*e)**.5;t.hspd=l/d*s,t.vspd=e/d*s,3===n[0]&&(t.hspd=-t.hspd,t.vspd=-t.vspd);break;case 4:t.dir+=n[1]}}],[(t,[,n])=>{if(n){let s=Core.ObjSha.from(t);s&&(1===n&&(s.aspd=.05,s.hspd=Math.randomr(-2,2),s.vspd=Math.randomr(-2,0),s.grav=.2),s.init())}t.destroy()},(t,[,n])=>{if(2===t.spr[0].length){let s=2===n?1^t.ind:n;s!==t.ind&&(t.ind=s,t.ctx.clr=!1)}},(t,[,n,s])=>{let l=$R.trg;switch(s){case 0:l[n]=1;break;case 1:l[n]=l[n]&&3!==l[n]?3:0;break;case 2:l[n]=l[n]&&3!==l[n]?3:1}},(t,[,n,s])=>{if("0"===n[0]){let t=n.slice(1);$R.VAR[t]=s[0]?$R.VAR[t]+s[1]:s[1]}else{let l=n.charCodeAt(0)-97;t.VAR[l]=s[0]?t.VAR[l]+s[1]:s[1]}},(t,[,n])=>{switch(n){case 1:$R.loadGame();break;case 0:$R.newGame()}},(t,[,n,s,l,e])=>$R.warp(n,s,l,e)],[(t,[,n])=>t.TML[n].run=1,(t,[,n])=>t.TML[n].run=0,(t,[,n])=>{let s=t.TML[n];s.run=0,s.time=0,s.node=0}],[(t,[,n,s])=>Au.play(n,2**(s/12)),(t,[,n,s,l,e,d,o,a])=>{let h=Core.ObjSha.from(t);h&&(h.aspd=1/n,h.xspd=s,h.yspd=l,h.hspd=e[0]?Math.randomr(e[1],e[2]):e[1],h.vspd=d[0]?Math.randomr(d[1],d[2]):d[1],h.grav=o[0]?Math.randomr(o[1],o[2]):o[1],h.rot=a[0]?Math.randomr(a[1],a[2]):a[1],h.init())}],[],[(t,[,n])=>{let s=$R.player;if(s){if(-1===s.jump)return;let t=s.djump+1;s.djump=n?t:Math.min(t,s.jump)}},(t,[,n])=>{let s=$R.player;if(s){let t=s.jump;-1===n?s.djump=s.jump=-1:(s.jump=n,-1===t?s.djump=n:(s.djump+=n-t,s.djump<1&&(s.djump=1)))}},(t,[,n])=>{let s=$R.player;s&&s.setGrav(n)},(t,[,n,s])=>{let l=$R.player;if(!l)return;let e,d,o=0===n[0]?n[1]:Math.srandom(n[1],n[2]);if(s[0]<3){let n=(0===s[0]?s[1]:1===s[0]?Math.srandom(s[1],s[2]):t.ang+s[1])*Math.DR;e=o*Math.cos(n),d=-o*Math.sin(n)}else{let n=$R.plyX-t.x,l=$R.plyY-t.y,a=(n*n+l*l)**.5;e=o*n/a,d=o*l/a,3===s[0]&&(e=-e,d=-d)}l.applyMove(e,d)}]],trg:[[(t,[,,n,s])=>s?3===$R.trg[n]:1===$R.trg[n],(t,[,,n,s,l])=>Math.comp(n?t.y:t.x,l,s),(t,[,,n])=>t.hd===n,(t,[,,n,s,l])=>Math.comp(t[n]??0,l,s),(t,[,,n,s,l])=>{let e=$R.player;return e&&Math.comp(n?e.y:e.x,l,s)},(t,[,,n,s,l])=>$R.player&&Math.comp($R.player[n],l,s),(t,[,,n,s,l])=>"0"===n[0]?Math.comp($R.VAR[n.slice(1)]??0,l,s):Math.comp(t.VAR[n.charCodeAt(0)-97],l,s),(t,[,,n,s,l])=>Math.comp($R[n]??0,l,s)],[(t,[,,n])=>{if(1===t.colS[n])return!0;if(2===t.colS[n]){let s=t.colO[n];if(t.moved||s.moved){let l=t.meet(0,0,n),e=t.obj+5,d=t.cm;l?l!==s&&(t.colO[n]=l,d&&(s.colS[e]=3,s.colO[e]=null,l.colO[e]=t,l.colS[e]&&3!==l.colS[e]||(l.colS[e]=1),d>1&&(s.colS[d]=3,s.colO[d]=null,l.colO[d]=t,l.colS[d]&&3!==l.colS[d]||(l.colS[d]=1)))):(t.colS[n]=3,t.colO[n]=null,d&&(s.colS[e]=3,s.colO[e]=null,d>1&&(s.colS[d]=3,s.colO[d]=null)))}return!1}{let s=t.meet(0,0,n),l=t.obj+5,e=t.cm;return!!s&&(t.colS[n]=1,t.colO[n]=s,e&&(s.colO[l]=t,s.colS[l]&&3!==s.colS[l]||(s.colS[l]=1),e>1&&(s.colO[e]=t,s.colS[e]&&3!==s.colS[e]||(s.colS[e]=1))),!0)}},(t,[,,n])=>3===t.colS[n]],[(t,[,,n])=>$C.keyPrs(n),(t,[,,n])=>$C.keyRls(n),(t,[,,n])=>$C.keyChk(n)]],def:[[1,function(){let t=this.spr[0],n=this.ind<<0;this.ind+=1/t.ims,this.ind>=t.length&&(this.ind-=t.length),n!==this.ind<<0&&(this.ctx.clr=!1)}],[1,function(){this.ind>=1?this.ind-=.0078125:0!==this.ind&&(this.ind=0,this.ctx.clr=!1)}],[0,()=>{}],[2,function(){if(this.lso&&!this.lst){let t=this.h;this.h=this.scy*this.len,this.calc=!1;let n=this.meetAll(0,0,2);if(n.length){let s=this.ang*Math.DR,l=Math.sin(s),e=Math.cos(s),d=this.h*l,o=this.h*e,a=this.x,h=this.y,c=1;for(let t=n.length;t--;){let s=n[t].V;for(let t=0;t<8;t+=6)for(let n=2;n<6;n+=2){let r=s[n]-s[t],p=s[n+1]-s[t+1],i=d*p-o*r,S=s[t]-a,m=s[t+1]-h;if(i){let t=(S*p-m*r)/i,n=(S*o-m*d)/i;t>=0&&t<1&&n>=0&&n<=1&&t<c&&(c=t)}else{let t=l*S+e*m,d=l*(s[n]-a)+e*(s[n+1]-h),o=(t<d?t:d)/this.h;o<c&&(c=o>0?o:0)}}}this.h=c*this.h+.5<<0,this.calc=!1,this.h!==t&&(this.ctx.clr=!1,this.moved=!0)}}}],[2,()=>{}]]};Lib.init();