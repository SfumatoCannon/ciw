const DB=Parse,LOC=(e,t)=>{location.search=e,t&&(location.hash=t)};if(navigator.userAgent.includes("Electron")&&navigator.userAgent.includes("CloudIWanna")){let e=sessionStorage,t=localStorage;"0.8.1"===t.getItem("version")&&t.getItem("HASH")?(DB.initialize("ciw-api","slnlzxkgzm9yihzpy2tsbgvhbgwuy29t"),DB.serverURL="http://212.129.134.97:1337/",DB.O=(e,t)=>t?DB.Object.extend(e).createWithoutData(t):new DB.Object(e),DB.Q=e=>new DB.Query(e),DB.A=(e,t,s)=>{let a=new DB.ACL;return a.setPublicReadAccess(e),a.setPublicWriteAccess(t),s&&(a.setReadAccess(s,!0),a.setWriteAccess(s,!0)),a},DB.err=e=>{switch(e.code){case 209:LOC("login.html");break;case 119:UI.alert("数据请求失败：无权访问")}},DB.enableEncryptedUser(),DB.secret="Q2xvdWQgSSBXYW5uYQ",USER=DB.User.current(),DB.off=(e,t)=>{$S.sget("offline")?setTimeout(t,1):e().catch(e=>{100===e.code?($S.sset("offline",1),t()):DB.err(e)})},USER||location.href.includes("login.html")?(Date.now()-(e.getItem("check")??0)>864e5||e.getItem("offline"))&&DB.Cloud.run("version",{v:t.getItem("HASH")}).then(s=>{e.setItem("update",s),t.getItem("version")==s?(e.setItem("check",Date.now()),e.removeItem("offline")):LOC("update.html")},t=>{9===t.code?(e.setItem("update",t.message),LOC("update.html")):DB.err(t)}):LOC("login.html")):LOC("update.html")}else location.pathname="/";